<Page x:Class="LLMockApiClient.Pages.DashboardPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:ui="http://schemas.modernwpf.com/2019"
      xmlns:controls="clr-namespace:LLMockApiClient.Controls"
      mc:Ignorable="d"
      d:DesignHeight="900" d:DesignWidth="1200"
      Title="Dashboard">

    <Grid Margin="32">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Main Content Area -->
        <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto" Margin="0,0,16,0">
            <StackPanel>
                <!-- Header -->
                <TextBlock Text="ðŸ“Š Quick Start Dashboard" FontSize="32" FontWeight="SemiBold" Margin="0,0,0,8" Foreground="White"/>
                <TextBlock Text="Live demos and quick samples" FontSize="16" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" Margin="0,0,0,24"/>

                <!-- Connection Status -->
                <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                        BorderBrush="#0078D4" BorderThickness="2"
                        CornerRadius="8" Padding="20" Margin="0,0,0,16">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Text="ðŸŒ Connection Status" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,8" Foreground="#0078D4"/>
                            <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                <TextBlock Text="API Base URL:" Margin="0,0,8,0"/>
                                <TextBlock x:Name="ApiBaseUrlText" FontWeight="SemiBold" Foreground="#5DADE2"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                <TextBlock Text="Status:" Margin="0,0,8,0"/>
                                <TextBlock x:Name="ConnectionStatusText" FontWeight="SemiBold"/>
                            </StackPanel>
                        </StackPanel>

                        <Button Grid.Column="1" Content="ðŸ”„ Test Connection"
                                Click="TestConnection_Click"
                                Padding="16,8"
                                Style="{StaticResource AccentButtonStyle}"/>
                    </Grid>
                </Border>

                <!-- Quick Samples Section -->
                <TextBlock Text="âš¡ Quick Samples" FontSize="24" FontWeight="SemiBold" Margin="0,8,0,16" Foreground="White"/>

                <!-- Mock API Quick Test -->
                <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                        BorderBrush="#27AE60" BorderThickness="2"
                        CornerRadius="8" Padding="20" Margin="0,0,0,16">
                    <StackPanel>
                        <Grid Margin="0,0,0,8">
                            <TextBlock Text="ðŸŽ® Quick API Test" FontSize="18" FontWeight="SemiBold" Foreground="#27AE60" HorizontalAlignment="Left"/>
                            <TextBlock HorizontalAlignment="Right">
                                <Hyperlink NavigateUri="https://github.com/scottgal/mostlylucidv2/blob/main/Mostlylucid.Blog.Tests.Integration/llmapi_mockapi_guide.md" RequestNavigate="Hyperlink_RequestNavigate" Foreground="#27AE60">
                                    <Run Text="ðŸ“– Learn more"/>
                                </Hyperlink>
                            </TextBlock>
                        </Grid>
                        <TextBlock Text="Test a mock API endpoint instantly with dynamic JSON shapes" Foreground="#CCCCCC" Margin="0,0,0,12"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <ComboBox Grid.Column="0" x:Name="QuickMethodCombo" SelectedIndex="0" Margin="0,0,8,0">
                                <ComboBoxItem Content="GET"/>
                                <ComboBoxItem Content="POST"/>
                            </ComboBox>
                            <TextBox Grid.Column="1" x:Name="QuickPathInput"
                                     Text="/users"
                                     Margin="0,0,8,0"/>
                            <Button Grid.Column="2" Content="ðŸš€ Send" Click="QuickApiTest_Click" Padding="16,8"/>
                        </Grid>

                        <controls:JsonViewer x:Name="QuickApiResultViewer" Height="120" Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>

                <!-- SignalR Quick Sample -->
                <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                        BorderBrush="#E74C3C" BorderThickness="2"
                        CornerRadius="8" Padding="20" Margin="0,0,0,16">
                    <StackPanel>
                        <Grid Margin="0,0,0,8">
                            <TextBlock Text="ðŸ”„ SignalR Live Stream" FontSize="18" FontWeight="SemiBold" Foreground="#E74C3C" HorizontalAlignment="Left"/>
                            <TextBlock HorizontalAlignment="Right">
                                <Hyperlink NavigateUri="https://github.com/scottgal/mostlylucidv2/blob/main/Mostlylucid.Blog.Tests.Integration/llmapi_signalr_guide.md" RequestNavigate="Hyperlink_RequestNavigate" Foreground="#E74C3C">
                                    <Run Text="ðŸ“– Learn more"/>
                                </Hyperlink>
                            </TextBlock>
                        </Grid>
                        <TextBlock Text="Create contexts and receive real-time updates via SignalR" Foreground="#CCCCCC" Margin="0,0,0,12"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBox Grid.Column="0" x:Name="SignalRContextInput"
                                     ui:ControlHelper.PlaceholderText="Context name (e.g., demo-stream)"
                                     Margin="0,0,8,0"/>
                            <Button Grid.Column="1" Content="â–¶ï¸ Connect" Click="QuickSignalR_Click" Padding="16,8"/>
                        </Grid>

                        <TextBlock x:Name="SignalRQuickStatusText" Margin="0,8,0,0" FontSize="11" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                        <TextBlock x:Name="SignalRStatusText" Margin="0,4,0,0" FontSize="11" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                    </StackPanel>
                </Border>

                <!-- SSE Quick Sample -->
                <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                        BorderBrush="#3498DB" BorderThickness="2"
                        CornerRadius="8" Padding="20" Margin="0,0,0,16">
                    <StackPanel>
                        <Grid Margin="0,0,0,8">
                            <TextBlock Text="ðŸ“¡ SSE Streaming" FontSize="18" FontWeight="SemiBold" Foreground="#3498DB" HorizontalAlignment="Left"/>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                <TextBlock Margin="0,0,12,0">
                                    <Hyperlink Click="NavigateToSSEPage" Foreground="#3498DB">
                                        <Run Text="ðŸ”— Full SSE Page"/>
                                    </Hyperlink>
                                </TextBlock>
                                <TextBlock>
                                    <Hyperlink NavigateUri="https://github.com/scottgal/mostlylucidv2/blob/main/Mostlylucid.Blog.Tests.Integration/llmapi_sse_guide.md" RequestNavigate="Hyperlink_RequestNavigate" Foreground="#3498DB">
                                        <Run Text="ðŸ“– Learn more"/>
                                    </Hyperlink>
                                </TextBlock>
                            </StackPanel>
                        </Grid>
                        <TextBlock Text="Server-Sent Events in 3 modes: LlmTokens, CompleteObjects, ArrayItems" Foreground="#CCCCCC" Margin="0,0,0,12"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBox Grid.Column="0" x:Name="SSEPathInput"
                                     Text="products"
                                     Margin="0,0,8,0"/>
                            <ComboBox Grid.Column="1" x:Name="SSEModeCombo" SelectedIndex="0" Margin="0,0,8,0">
                                <ComboBoxItem Content="LlmTokens"/>
                                <ComboBoxItem Content="CompleteObjects"/>
                                <ComboBoxItem Content="ArrayItems"/>
                            </ComboBox>
                            <Button Grid.Column="2" Content="â–¶ï¸ Test" Click="QuickSSE_Click" Padding="16,8"/>
                        </Grid>

                        <TextBlock x:Name="SSEStatusText" Margin="0,8,0,0" FontSize="11" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                    </StackPanel>
                </Border>

                <!-- OpenAPI Quick Sample -->
                <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                        BorderBrush="#F39C12" BorderThickness="2"
                        CornerRadius="8" Padding="20" Margin="0,0,0,16">
                    <StackPanel>
                        <Grid Margin="0,0,0,8">
                            <TextBlock Text="ðŸ“‹ OpenAPI Quick Load" FontSize="18" FontWeight="SemiBold" Foreground="#F39C12" HorizontalAlignment="Left"/>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                <TextBlock Margin="0,0,12,0">
                                    <Hyperlink Click="NavigateToOpenAPIPage" Foreground="#F39C12">
                                        <Run Text="ðŸ”— Full OpenAPI Manager"/>
                                    </Hyperlink>
                                </TextBlock>
                                <TextBlock>
                                    <Hyperlink NavigateUri="https://github.com/scottgal/mostlylucidv2/blob/main/Mostlylucid.Blog.Tests.Integration/llmapi_openapi_guide.md" RequestNavigate="Hyperlink_RequestNavigate" Foreground="#F39C12">
                                        <Run Text="ðŸ“– Learn more"/>
                                    </Hyperlink>
                                </TextBlock>
                            </StackPanel>
                        </Grid>
                        <TextBlock Text="Load an OpenAPI spec and instantly test endpoints" Foreground="#CCCCCC" Margin="0,0,0,12"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <ComboBox Grid.Column="0" x:Name="OpenApiSampleCombo" Margin="0,0,8,0">
                                <ComboBoxItem Content="Petstore (petstore3.swagger.io)" Tag="https://petstore3.swagger.io/api/v3/openapi.json" IsSelected="True"/>
                                <ComboBoxItem Content="JSONPlaceholder" Tag="https://jsonplaceholder.typicode.com/openapi.json"/>
                            </ComboBox>
                            <Button Grid.Column="1" Content="ðŸ“¥ Load" Click="QuickOpenAPI_Click" Padding="16,8"/>
                        </Grid>

                        <TextBlock x:Name="OpenApiStatusText" Margin="0,8,0,0" FontSize="11" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>

                        <!-- Loaded Endpoints List -->
                        <StackPanel x:Name="OpenApiEndpointsPanel" Visibility="Collapsed" Margin="0,12,0,0">
                            <TextBlock Text="Available Endpoints (select to test):" FontWeight="SemiBold" Foreground="#F39C12" Margin="0,0,0,8"/>
                            <ListBox x:Name="OpenApiEndpointsList" MaxHeight="200"
                                     SelectionChanged="OpenApiEndpoint_SelectionChanged"
                                     Background="#2D2D30" BorderBrush="#3E3E42">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding Method}" FontWeight="Bold" Width="60" Foreground="{Binding MethodColor}"/>
                                            <TextBlock Text="{Binding Path}" Foreground="#DDDDDD"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>

                            <Grid Margin="0,8,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock x:Name="SelectedEndpointText" Grid.Column="0" FontSize="11" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" VerticalAlignment="Center"/>
                                <Button Grid.Column="1" Content="ðŸš€ Test" Click="TestOpenApiEndpoint_Click" Padding="12,6" IsEnabled="False" x:Name="TestEndpointButton"/>
                            </Grid>

                            <controls:JsonViewer x:Name="OpenApiResultViewer" Height="150" Margin="0,8,0,0" Visibility="Collapsed"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- Live Activity Sidebar -->
        <Border Grid.Column="1" Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                CornerRadius="8" Padding="16">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Header -->
                <StackPanel Grid.Row="0" Margin="0,0,0,12">
                    <TextBlock Text="ðŸ“Š Live Activity" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,4"/>
                    <TextBlock Text="Real-time data streams" FontSize="11" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                </StackPanel>

                <!-- Live Data Display -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <TextBox x:Name="LiveDataTextBox"
                             IsReadOnly="True"
                             TextWrapping="Wrap"
                             FontFamily="Consolas"
                             FontSize="10"
                             Background="#1E1E1E"
                             Foreground="#98C379"
                             BorderThickness="0"
                             MinHeight="400"/>
                </ScrollViewer>

                <!-- Controls -->
                <StackPanel Grid.Row="2" Margin="0,12,0,0">
                    <Button Content="ðŸ—‘ï¸ Clear Log" Click="ClearLiveData_Click"
                            HorizontalAlignment="Stretch" Padding="8,4" Margin="0,0,0,8"/>
                    <StackPanel>
                        <TextBlock Text="Stats:" FontSize="11" FontWeight="SemiBold" Margin="0,0,0,4"/>
                        <TextBlock x:Name="LiveStatsText" FontSize="10" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" TextWrapping="Wrap"/>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Page>
