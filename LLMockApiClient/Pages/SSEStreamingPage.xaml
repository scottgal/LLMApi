<Page x:Class="LLMockApiClient.Pages.SSEStreamingPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:ui="http://schemas.modernwpf.com/2019"
      xmlns:controls="clr-namespace:LLMockApiClient.Controls"
      Title="SSE Streaming">
    <Grid Margin="32">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Margin="0,0,0,24">
            <TextBlock Text="ðŸ“¡ Server-Sent Events (SSE) Streaming" FontSize="32" FontWeight="SemiBold" Foreground="White"/>
            <TextBlock Text="Three streaming modes: LlmTokens, CompleteObjects, ArrayItems" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" Margin="0,4,0,0"/>
        </StackPanel>

        <Border Grid.Row="1" Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                BorderBrush="#3498DB" BorderThickness="2"
                CornerRadius="8" Padding="20" Margin="0,0,0,16">
            <StackPanel>
                <TextBlock Text="Streaming Mode:" Margin="0,0,0,4" Foreground="White"/>
                <ComboBox x:Name="ModeComboBox" SelectedIndex="0" Margin="0,0,0,12">
                    <ComboBoxItem Content="LlmTokens - Token-by-token (AI chat)" Tag="LlmTokens"/>
                    <ComboBoxItem Content="CompleteObjects - Full objects per event" Tag="CompleteObjects"/>
                    <ComboBoxItem Content="ArrayItems - Array items with metadata" Tag="ArrayItems"/>
                </ComboBox>

                <TextBlock Text="Path:" Margin="0,0,0,4" Foreground="White"/>
                <TextBox x:Name="PathTextBox" Text="products" Margin="0,0,0,12"
                         ui:ControlHelper.PlaceholderText="e.g., products, users, items"/>

                <CheckBox x:Name="ContinuousCheckBox" Content="Continuous Streaming"
                          Foreground="White" Margin="0,0,0,12"
                          ToolTip="Keep streaming continuously without stopping"/>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Button x:Name="StartButton" Grid.Column="0" Content="â–¶ï¸ Start Streaming"
                            Click="StartStreaming_Click" Padding="16,8" Margin="0,0,8,0"/>
                    <Button x:Name="StopButton" Grid.Column="1" Content="â¹ï¸ Stop"
                            Click="StopStreaming_Click" Padding="16,8" Margin="0,0,8,0"
                            IsEnabled="False"/>
                    <Button Grid.Column="2" Content="ðŸ—‘ï¸ Clear"
                            Click="ClearOutput_Click" Padding="16,8"/>

                    <StackPanel Grid.Column="3" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                        <TextBlock Text="Events:" Margin="0,0,8,0" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                        <TextBlock x:Name="EventCountText" Text="0" FontWeight="Bold" Foreground="#3498DB"/>
                    </StackPanel>
                </Grid>
            </StackPanel>
        </Border>

        <Border Grid.Row="2" Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                BorderBrush="#3498DB" BorderThickness="2"
                CornerRadius="8" Padding="16">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Text="ðŸ“Š Stream Output" FontWeight="SemiBold"
                           Foreground="White" Margin="0,0,0,12"/>

                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" x:Name="OutputScrollViewer">
                    <TextBox x:Name="StreamTextBox" IsReadOnly="True" TextWrapping="Wrap"
                             FontFamily="Consolas" FontSize="11"
                             Background="#1E1E1E" Foreground="#98C379"
                             BorderThickness="0"
                             MinHeight="400"/>
                </ScrollViewer>
            </Grid>
        </Border>
    </Grid>
</Page>
